<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Cartes de l'extension {{ set_name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <script src="{{ url_for('static', filename='index.js') }}">
    </script>
</head>
<body>
<div id="top-bar">
    <span>Total cartes possÃ©dÃ©es : <span id="counter">0</span>/ {{ card_taille }}</span>
    <span>Communes : <span id="common-counter" data-max="{{ rarity_count.common }}">0 / 0</span></span>
    <span>Peu communes : <span id="uncommon-counter" data-max="{{ rarity_count.uncommon }}">0 / 0</span></span>
    <span>Rares : <span id="rare-counter" data-max="{{ rarity_count.rare }}">0 / 0</span></span>
    <span>Mythiques : <span id="mythic-counter" data-max="{{ rarity_count.mythic }}">0 / 0</span></span>
    <div id="filter-bar" style="padding:10px; background:#f0f0f0; position: sticky; top: 40px; z-index: 9;">
        <label for="filter-select">Filtrer les cartes :</label>
        <select id="filter-select" onchange="applyFilter()">
            <option value="all" selected>Toutes</option>
            <option value="checked">Cartes possÃ©dÃ©es</option>
            <option value="unchecked">Cartes non possÃ©dÃ©es</option>
        </select>
    </div>
    <span>ğŸ’° Total prix cartes cochÃ©es : {{ '%.2f' % total_price_checked }} â‚¬</span>
    <span> | ğŸ’¸ Total cartes non cochÃ©es : {{ '%.2f' % total_price_unchecked }} â‚¬</span>
</div>

<h1>Cartes de l'extension "{{ set_name }}"</h1>
<div>
    {% for card in card_infos %}
        <div class="card {% if card.booster %}booster-true{% endif %}"
             data-booster="{{ 'true' if card.booster else 'false' }}">
            {% if card.booster %}
                <div class="booster-badge">ğŸ Booster</div>
            {% endif %}
            {% if card.image_url %}
                <img src="{{ card.image_url }}" alt="{{ card.name }}"
                     data-name={{ card.name|tojson }} onclick="toggleCheckboxFromElement(this)">
            {% else %}
                <div style="height:280px; background:#ccc;"
                     onclick="toggleCheckbox('{{ card.id }}', {{ card.name|tojson }})">Pas d'image
                </div>
            {% endif %}
            <p>
                <label>
                    <input type="checkbox"
                           id="{{ card.id }}"
                           data-name={{ card.name|tojson }}
                                   name="selected_cards"
                           value="{{ card.name }}"
                           data-rarity="{{ card.rarity }}"
                           {% if card.checked %}checked{% endif %}
                           onchange="checkboxChangedFromElement(this)">
                    {{ card.collector_number }} â€“ {{ card.name }} ({{ card.rarity }})
                </label>
            <p style="margin: 0.5em 0; font-size: 0.9em; color: #333;">
                ğŸ’¶ {{ '%.2f' % card.price }} â‚¬
            </p>
            </p>
        </div>
    {% endfor %}
</div>
</body>
</html>